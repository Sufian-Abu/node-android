var crypto = require('crypto');
var rand = require('csprng');
var mongoose = require('mongoose');
var nodemailer = require('nodemailer');
var user = require('config/models');
 
exports.cpass = function(id,opass,npass,displayname,report,public_key,lat,lon,category,locationname,created_at,callback) {
 
user.find({token: id},function(err,users){
 
if(users.length != 0){

user.findOne({ token: id }, function (err, doc){
  doc.hashed_password = hashed_passwordn;
  doc.salt = temp1;
  doc.displayname = displayname;
  doc.report = report;
  doc.public_key = public_key;
  doc.created_at = created_at;
  doc.lon = lon;
  doc.lat = lat;
  doc.category=category;
  doc.locationname=locationname;
  doc.save();
 
callback({'response':"Password Sucessfully Changed",'res':true});
 
});

}

else{
 
callback({'response':"Error while changing password",'res':false});
 
}
 
});
}
 
