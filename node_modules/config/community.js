var rand = require('csprng');
var mongoose = require('mongoose');
var user = require('config/models');

exports.community = function(displayname,report,public_key,created_at,lat,lon,category,locationname,callback) {

 
user.find({token: public_key},function(err,users){
 if(users.length != 0){


  user.findOne({ token: public_key }, function (err, doc){
  doc.displayname = displayname;
  doc.report = report;
  doc.public_key = public_key;
  doc.created_at = created_at;
  doc.lon = lon;
  doc.lat = lat;
  doc.category=category;
  doc.locationname=locationname;
  doc.save();
 
 callback({
  "data": {
    
    "success" : {
       
      "message" : "Successful Submission"
      
    },
    "status" : 200
  }
});
 
});


}

else{
 
   callback({
  "data": {
    "error" : {
      "message" : "Wrong Submission",
      "errorCode" : "5000"
    },
    "status" : 5000
  }
});
 
}

 
});
}