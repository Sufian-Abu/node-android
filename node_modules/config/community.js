var rand = require('csprng');
var mongoose = require('mongoose');
var user = require('config/models');

exports.community = function(displayname,report,public_key,created_at,lat,lon,category,locationname,callback) {

 
user.find({token: public_key},function(err,users){
 if(users.length != 0){


  user.findOne({ token: public_key }, function (err, users){
  users.displayname = displayname;
  users.report = report;
  users.public_key = public_key;
  users.created_at = created_at;
  users.lon = lon;
  users.lat = lat;
  users.category=category;
  users.locationname=locationname;
  users.save();
 
 callback({
  "data": {
    
    "success" : {
       
      "message" : "Successful Submission"
      
    },
    "status" : 200
  }
});
 
});


}

else{
 
   callback({
  "data": {
    "error" : {
      "message" : "Wrong Submission",
      "errorCode" : "5000"
    },
    "status" : 5000
  }
});
 
}

 
});
}