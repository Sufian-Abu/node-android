var rand = require('csprng');
var mongoose = require('mongoose');
var user = require('config/models');

exports.community = function(displayname,report,public_key,created_at,lat,lon,callback) {

 
user.find({token: public_key},function(err,users){
 if(users.length != 0){


  user.findOne({ token: public_key }, function (err, doc){
  doc.displayname = displayname;
  doc.report = report;
  doc.public_key = public_key;
  doc.created_at = created_at;
  doc.lon = lon;
  doc.lat = lat;
  doc.save();
 
callback({'response':"Data Sucessfully Submitted",'res':true});
 
});


}

else{
 
callback({'response':"Error while inserting",'res':false});
 
}

 
});
}